# Telegram Forward Bot

Простой Telegram бот, который пересылает все сообщения, отправленные в бота, в вашу личку.

## Функциональность

- Пересылает все входящие сообщения (текст, фото, документы, аудио, видео, голосовые сообщения, стикеры)
- Показывает подробную информацию об отправителе
- Работает в Docker контейнере
- Автоматическое обновление через GitHub

## Установка

### 1. Клонируйте репозиторий

```bash
git clone https://github.com/trikotlet/tg-forward.git
cd tg-forward
```

### 2. Настройте переменные окружения

Заполните `.env` файл (он уже создан):

```env
# Токен вашего Telegram бота (получить у @BotFather)
BOT_TOKEN=ваш_токен_бота

# Ваш личный Chat ID (узнать у @userinfobot или через бота)
ADMIN_CHAT_ID=ваш_chat_id
```

**Важно:** Убедитесь, что `ADMIN_CHAT_ID` является числом (например: `123456789`)

### 3. Получите токен бота

1. Напишите [@BotFather](https://t.me/botfather) в Telegram
2. Отправьте команду `/newbot`
3. Следуйте инструкциям для создания бота
4. Скопируйте токен и вставьте в `BOT_TOKEN`

### 4. Получите ваш Chat ID

**Вариант 1 (автоматический):**
```bash
python get_chat_id.py
```
Затем напишите любое сообщение вашему боту, и он покажет ваш Chat ID.

**Вариант 2 (ручной):**
1. Напишите [@userinfobot](https://t.me/userinfobot) в Telegram
2. Скопируйте ваш Chat ID и вставьте в `ADMIN_CHAT_ID`

### 5. Установите зависимости (для локального тестирования)

```bash
pip install -r requirements.txt
```

### 6. Запустите бота

**Через Docker (рекомендуется для продакшена):**
```bash
docker-compose up --build -d
```

**Локально (для тестирования):**
```bash
python run_local.py
```

## Использование

После запуска бот будет автоматически пересылать все сообщения, которые ему отправят, в вашу личку. Каждое сообщение будет содержать:

- Информацию об отправителе (имя, ID, username)
- ID чата
- Время отправки
- Тип чата
- Содержимое сообщения

## Команды для управления

```bash
# Запуск бота
docker-compose up -d

# Остановка бота
docker-compose down

# Просмотр логов
docker-compose logs -f telegram-bot

# Перезапуск с обновлением
docker-compose up --build -d
```

## Автоматическое обновление

Бот поддерживает автоматическое обновление через GitHub Actions. При пуше изменений в ветку `main` или `master` на сервере автоматически:

1. Останавливаются текущие контейнеры
2. Вытягиваются последние изменения
3. Пересобираются и запускаются контейнеры
4. Очищаются старые Docker образы

## Структура проекта

```
tg-forward/
├── main.py              # Основной код бота
├── get_chat_id.py       # Скрипт для получения Chat ID
├── run_local.py         # Скрипт для локального запуска
├── requirements.txt     # Зависимости Python
├── Dockerfile          # Docker образ
├── docker-compose.yml  # Конфигурация Docker Compose
├── .env_example        # Пример переменных окружения
├── .gitignore          # Исключаемые файлы
├── README.md           # Подробная инструкция
├── logs/               # Папка для логов
└── .github/
    └── workflows/
        └── update.yml  # GitHub Actions для обновления
```

## Зависимости

- aiogram 3.7.0 - для работы с Telegram API
- python-dotenv 1.0.0 - для загрузки переменных окружения

## Безопасность

- Никогда не коммитите `.env` файл с реальными токенами
- Используйте strong токены для бота
- Регулярно обновляйте зависимости

## Лицензия

MIT License